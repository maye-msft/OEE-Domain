<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.1"
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd">

    <persistence-unit name="OEE" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>    

        <!-- entity classes -->                
      	<class>org.point85.domain.collector.DataCollector</class>
      	<class>org.point85.domain.collector.DataSource</class>
      	<class>org.point85.domain.collector.EventHistory</class>
      	<class>org.point85.domain.collector.ProductionHistory</class>
      	<class>org.point85.domain.collector.SetupHistory</class>
      	
      	<class>org.point85.domain.http.HttpSource</class>
      	<class>org.point85.domain.messaging.MessagingSource</class>
      	<class>org.point85.domain.opc.da.OpcDaSource</class>
      	<class>org.point85.domain.opc.ua.OpcUaSource</class>
      	<class>org.point85.domain.web.WebSource</class>
      	
      	<class>org.point85.domain.plant.Area</class>
      	<class>org.point85.domain.plant.Enterprise</class>
      	<class>org.point85.domain.plant.Equipment</class>
      	<class>org.point85.domain.plant.EquipmentMaterial</class>
      	<class>org.point85.domain.plant.Material</class>
      	<class>org.point85.domain.plant.PlantEntity</class>
      	<class>org.point85.domain.plant.ProductionLine</class>
      	<class>org.point85.domain.plant.Reason</class>
      	<class>org.point85.domain.plant.Site</class>
      	<class>org.point85.domain.plant.WorkCell</class>
      	
      	<class>org.point85.domain.script.ScriptResolver</class>
      	<class>org.point85.domain.uom.UnitOfMeasure</class>
      	
      	<class>org.point85.domain.schedule.NonWorkingPeriod</class>
      	<class>org.point85.domain.schedule.Rotation</class>
      	<class>org.point85.domain.schedule.RotationSegment</class>
      	<class>org.point85.domain.schedule.Shift</class>      	
      	<class>org.point85.domain.schedule.Team</class>
      	<class>org.point85.domain.schedule.WorkSchedule</class>  
        
		<!-- use the listed entity classes -->
        <exclude-unlisted-classes>true</exclude-unlisted-classes>

        <properties>
        	<property name="hibernate.dialect" value="org.hibernate.dialect.SQLServer2012Dialect"/>
					
         	<!-- <property name="javax.persistence.jdbc.url" value="jdbc:sqlserver://Kent-Acer:1433;databaseName=JPA"/> -->
         	<property name="javax.persistence.jdbc.url" value="jdbc:sqlserver://localhost:1433;databaseName=OEE"/>
         	<property name="javax.persistence.jdbc.user" value="Point85"/>
         	<property name="javax.persistence.jdbc.password" value="Point85"/>
         	         	
         	<property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
         	
         	<!-- lazy loading without a transaction -->
         	<property name="hibernate.enable_lazy_load_no_trans" value="true"/>
         	
         	<!--  multiple representations of the same entity are being merged -->
         	<property name="hibernate.event.merge.entity_copy_observer" value="allow"/>
         	
         	<!-- HikariCP -->
         	<property name="hibernate.hikari.minimumIdle" value="5" />
      		<property name="hibernate.hikari.maximumPoolSize" value="10" />
      		<property name="hibernate.hikari.idleTimeout" value="30000" />
      		<property name="hibernate.connection.provider_class" value="org.hibernate.hikaricp.internal.HikariCPConnectionProvider" />
         	
         	<!-- C3P0 Connection Pool 
      		<property name="hibernate.c3p0.min_size" value="5" />
      		<property name="hibernate.c3p0.max_size" value="20" />
      		<property name="hibernate.c3p0.timeout" value="1000" />
      		<property name="hibernate.c3p0.max_statements" value="50" />
      		<property name="hibernate.c3p0.idle_test_period" value="2000" />
      		-->
      		
      		 
         	<!-- debugging -->
         	<!-- <property name="hibernate.generate_statistics" value="true" /> -->
         	<!-- <property name="show_sql" value="true"/> -->
        	<!-- <property name="format_sql" value="true"/> -->
        </properties>
    </persistence-unit>
</persistence>